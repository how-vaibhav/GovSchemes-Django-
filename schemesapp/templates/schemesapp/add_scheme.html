{% extends "base.html" %} {% load static %} {% block extra_head %}
<!-- Bootstrap CSS -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link rel="stylesheet" href="{% static 'css/add_scheme.css' %}" />
{% endblock %} {% block content %}
<div class="container Scheme-form-container">
  <div class="card shadow-sm">
    <div class="card-body p-4">
      <h2 class="text-center mb-4">Enter Scheme Details</h2>

      {% if messages %} {% for message in messages %}
      <div class="alert alert-success text-center message" role="alert">
        <strong>Scheme added!</strong>
      </div>
      {% endfor %} {% endif %}

      <form method="post" novalidate onsubmit="showLoader()">
        {% csrf_token %} {{ form.as_p }}

        <button type="submit" class="btn btn-send w-100 mb-3" id="submitBtn">
          <span class="loader" id="loader"></span>
          Submit
        </button>
      </form>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const requiredFields = document.querySelectorAll(
      "input[required], textarea[required], select[required]"
    );
    requiredFields.forEach((field) => {
      field.addEventListener("invalid", function () {
        this.setCustomValidity(
          "This field is required. Please provide the necessary details."
        );
        this.style.borderColor = "red";
      });
      field.addEventListener("input", function () {
        this.setCustomValidity("");
        this.style.borderColor = "";
      });
    });
  });

  function showLoader() {
    const loader = document.getElementById("loader");
    const btn = document.getElementById("submitBtn");
    loader.style.display = "inline-block";
    btn.disabled = true;
    btn.style.paddingLeft = "40px";
  }
</script>
{% endblock %}
